<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f2f2f2;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .game-container {
            text-align: center;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }

        img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .dialog-container {
            margin-top: 20px;
            text-align: left;
            max-width: 400px;
            margin: auto;
        }

        .dialog {
            background-color: #f2f2f2;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
        }
    </style>
    <title>Hotel Adventure</title>
</head>
<body>
    <div class="game-container">
        <h1>Welcome to the Hotel Adventure!</h1>
        <div id="output" class="dialog-container"></div>
        <button onclick="startGame()">Start Check-In</button>
    </div>
    <script>
        const characters = {
            user: "You",
            ahmed: { name: "Ahmed", picture: "a.jpg" },
            diego: { name: "Diego", picture: "b.jpg" },
            marsha: { name: "Marsha", picture: "m.jpg" },
        };

        const dialogues = {
            ahmed: [
                "Welcome to the hotel! I'm Ahmed, your concierge. How can I assist you today?",
                "Is everything going smoothly? Let me know if you need anything!",
                "If you have any questions, feel free to ask. Enjoy your stay!"
            ],
            diego: [
                "Hello there! I'm Diego, the receptionist. Ready for check-in?",
                "Need any information about the hotel facilities? Just ask!",
                "If you have any issues, don't hesitate to let me know. I'm here to help!"
            ],
            marsha: [
                "Hi, I'm Marsha, the duty manager. How's your day going?",
                "If you have any special requests, feel free to share them with me.",
                "Enjoy your time at our hotel! If you need assistance, I'm here for you."
            ]
        };

        function getRandomCharacter() {
            const characterKeys = Object.keys(characters);
            const randomKey = characterKeys[Math.floor(Math.random() * characterKeys.length)];
            return randomKey;
        }

        function getRandomDialogue(character) {
            const characterDialogues = dialogues[character.toLowerCase()];
            const randomIndex = Math.floor(Math.random() * characterDialogues.length);
            return characterDialogues[randomIndex];
        }

        function displayImage(character) {
            const imageContainer = document.getElementById('output');
            const image = document.createElement('img');
            image.src = characters[character]?.picture || 'placeholder.jpg';
            image.alt = character;
            imageContainer.innerHTML = '';
            imageContainer.appendChild(image);
        }

        function showDialog(character, message) {
            const output = document.getElementById('output');
            const dialog = document.createElement('div');
            dialog.classList.add('dialog');
            dialog.textContent = `${characters[character]?.name || character}: ${message}`;
            output.appendChild(dialog);
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        async function startGame() {
            const userCharacter = characters.user.toLowerCase();

            const targetCharacter = getRandomCharacter();
            showDialog(userCharacter, "Welcome to our hotel! You are here for check-in.");

            let welcomeDisplayed = true; // Flag to track whether the welcome message is already displayed

            const interactions = {
                diego: { prompt: false, dkb: false, ddb: false },
                ahmed: { wait: false },
                marsha: { upgrade: false }
            };

            for (let i = 0; i < 10; i++) {
                const currentCharacter = getRandomCharacter();
                if (welcomeDisplayed) {
                    displayImage(currentCharacter.toLowerCase());
                    welcomeDisplayed = false;
                }

                const dialogue = getRandomDialogue(currentCharacter);
                showDialog(currentCharacter, dialogue);

                if (currentCharacter.toLowerCase() === targetCharacter) {
                    // Check if the character is Marsha, Ahmed, or Diego
                    if (currentCharacter.toLowerCase() === 'diego') {
                        if (!interactions.diego.prompt) {
                            const answer = prompt("Diego: Would you like a DKB (Double King Bed) or DDB (Double Double Bed)?").toLowerCase();
                            interactions.diego.prompt = true;

                            if (answer === 'dkb') {
                                interactions.diego.dkb = true;
                                showDialog(userCharacter, "Diego: I'm sorry, but we currently don't have availability for DKB.");
                                interactions.ahmed.wait = true;
                                showDialog('ahmed', "Ahmed: Please have a seat in our waiting area. Marsha will assist you shortly.");
                            } else if (answer === 'ddb') {
                                                           interactions.diego.ddb = true;
                                showDialog(userCharacter, "Diego: Great choice! You've selected DDB. Your room key for 308 is ready.");
                                showDialog('marsha', "Marsha: Hello! I heard you've chosen DDB. Here's your complimentary upgrade to a deluxe suite. Enjoy your stay!");
                                interactions.marsha.upgrade = true;
                                showDialog('ahmed', "Ahmed: If you have any further requests or questions, feel free to ask. Have a wonderful stay!");
                                break;
                            } else {
                                showDialog(userCharacter, "Diego: I'm sorry, I didn't understand your choice. Please choose either DKB or DDB.");
                            }
                        } else {
                            showDialog(userCharacter, "Diego: How may I assist you further?");
                        }
                    } else if (currentCharacter.toLowerCase() === 'ahmed') {
                        if (interactions.ahmed.wait) {
                            showDialog('ahmed', "Ahmed: Please have a seat in our waiting area. Marsha will assist you shortly.");
                            break;
                        } else {
                            showDialog('ahmed', "Ahmed: How can I assist you today? If you have any requests or questions, feel free to ask.");
                        }
                    } else if (currentCharacter.toLowerCase() === 'marsha') {
                        if (interactions.marsha.upgrade) {
                            showDialog('marsha', "Marsha: I hope you enjoy the complimentary upgrade. If you need anything else, let me know.");
                            break;
                        } else {
                            showDialog('marsha', "Marsha: How's your day going? If you have any special requests, feel free to share them with me.");
                        }
                    } else {
                        showDialog(userCharacter, "You found the right person! Check-in successful. You win!");
                        return;
                    }
                } else {
                    if (i === 9) {
                        showDialog(userCharacter, "You couldn't find the right person. Check-in unsuccessful. You lose!");
                        return;
                    } else {
                        showDialog(currentCharacter, "Sorry, wrong person. Keep looking for the right team!");
                    }
                }

                await sleep(2000);
            }
        }
    </script>
</body>
</html>

